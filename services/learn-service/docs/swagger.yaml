basePath: /api/v4
definitions:
  handlers.SubmitWordResultsRequest:
    properties:
      results:
        items:
          $ref: '#/definitions/models.WordResult'
        type: array
    type: object
  handlers.TestResultRequest:
    properties:
      results:
        items:
          $ref: '#/definitions/models.TestResultItem'
        type: array
    type: object
  models.Character:
    properties:
      audio:
        description: URL to audio file on media server
        type: string
      consonant:
        description: defines a membership to a consonant group
        type: string
      englishReading:
        type: string
      hiragana:
        type: string
      id:
        type: integer
      katakana:
        type: string
      russianReading:
        type: string
      vowel:
        description: defines a membership to a vowel group
        type: string
    type: object
  models.CharacterListItem:
    properties:
      consonant:
        type: string
      hiragana:
        type: string
      id:
        type: integer
      katakana:
        type: string
      vowel:
        type: string
    type: object
  models.CharacterResponse:
    properties:
      character:
        description: Hiragana or Katakana
        type: string
      consonant:
        description: Not always present, depends on the context
        type: string
      id:
        type: integer
      reading:
        description: English or Russian reading
        type: string
      vowel:
        description: Not always present, depends on the context
        type: string
    type: object
  models.ListeningTestItem:
    properties:
      audioUrl:
        type: string
      correctChar:
        type: string
      id:
        type: integer
      wrongOptions:
        description: Two wrong character options
        items:
          type: string
        type: array
    type: object
  models.ReadingTestItem:
    properties:
      correctChar:
        description: Correct character
        type: string
      id:
        type: integer
      reading:
        description: English or Russian reading
        type: string
      wrongOptions:
        description: Two wrong character options
        items:
          type: string
        type: array
    type: object
  models.TestResultItem:
    properties:
      characterId:
        type: integer
      passed:
        type: boolean
    type: object
  models.UserLearnHistory:
    properties:
      characterHiragana:
        type: string
      characterKatakana:
        type: string
      hiraganaListeningResult:
        type: number
      hiraganaReadingResult:
        type: number
      hiraganaWritingResult:
        type: number
      katakanaListeningResult:
        type: number
      katakanaReadingResult:
        type: number
      katakanaWritingResult:
        type: number
    type: object
  models.Word:
    properties:
      easyPeriod:
        description: Days
        type: integer
      englishTranslation:
        type: string
      example:
        description: Japanese sentence
        type: string
      exampleEnglishTranslation:
        type: string
      exampleGermanTranslation:
        type: string
      exampleRussianTranslation:
        type: string
      extraHardPeriod:
        description: Days
        type: integer
      germanTranslation:
        type: string
      hardPeriod:
        description: Days
        type: integer
      id:
        type: integer
      normalPeriod:
        description: Days
        type: integer
      phoneticClues:
        description: Hiragana reading
        type: string
      russianTranslation:
        type: string
      word:
        description: Kanji word
        type: string
      wordAudio:
        description: URL to word audio metadata on media server
        type: string
      wordExampleAudio:
        description: URL to word example audio metadata on media server
        type: string
    type: object
  models.WordListItem:
    properties:
      englishTranslation:
        type: string
      id:
        type: integer
      phoneticClues:
        type: string
      word:
        type: string
    type: object
  models.WordResponse:
    properties:
      easyPeriod:
        type: integer
      example:
        type: string
      exampleTranslation:
        description: Locale-specific example translation
        type: string
      extraHardPeriod:
        type: integer
      hardPeriod:
        type: integer
      id:
        type: integer
      normalPeriod:
        type: integer
      phoneticClues:
        type: string
      translation:
        description: Locale-specific word translation
        type: string
      word:
        type: string
      wordAudio:
        description: URL to word audio metadata on media server
        type: string
      wordExampleAudio:
        description: URL to word example audio metadata on media server
        type: string
    type: object
  models.WordResult:
    properties:
      period:
        description: Days (1-30)
        type: integer
      wordId:
        type: integer
    type: object
  models.WritingTestItem:
    properties:
      Character:
        description: Correct character whose reading is to be guessed
        type: string
      correctReading:
        description: English or Russian reading correct reading
        type: string
      id:
        type: integer
    type: object
host: localhost:8080
info:
  contact:
    email: shelyahin.mihail@gmail.com
    name: API Support
  description: API for learning Japanese
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: JapaneseStudent Learn API
  version: "4.0"
paths:
  /admin/characters:
    get:
      consumes:
      - application/json
      description: Get full list of characters ordered by ID
      produces:
      - application/json
      responses:
        "200":
          description: List of characters
          schema:
            items:
              $ref: '#/definitions/models.CharacterListItem'
            type: array
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get list of characters
      tags:
      - admin
    post:
      consumes:
      - multipart/form-data
      description: Create a new character with optional audio file
      parameters:
      - description: Consonant
        in: formData
        name: consonant
        required: true
        type: string
      - description: Vowel
        in: formData
        name: vowel
        required: true
        type: string
      - description: English reading
        in: formData
        name: englishReading
        required: true
        type: string
      - description: Russian reading
        in: formData
        name: russianReading
        required: true
        type: string
      - description: Katakana character
        in: formData
        name: katakana
        required: true
        type: string
      - description: Hiragana character
        in: formData
        name: hiragana
        required: true
        type: string
      - description: Audio file (optional)
        in: formData
        name: audio
        type: file
      produces:
      - application/json
      responses:
        "201":
          description: Character created successfully
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Invalid request body or character already exists
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Create a character
      tags:
      - admin
  /admin/characters/{id}:
    delete:
      consumes:
      - application/json
      description: Delete a character by ID
      parameters:
      - description: Character ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Invalid character ID
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Character not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Delete a character
      tags:
      - admin
    get:
      consumes:
      - application/json
      description: Get full information about a character by ID
      parameters:
      - description: Character ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Character information
          schema:
            $ref: '#/definitions/models.Character'
        "400":
          description: Invalid character ID
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Character not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get character by ID
      tags:
      - admin
    patch:
      consumes:
      - multipart/form-data
      description: Update character fields (partial update) with optional audio file
      parameters:
      - description: Character ID
        in: path
        name: id
        required: true
        type: integer
      - description: Consonant
        in: formData
        name: consonant
        type: string
      - description: Vowel
        in: formData
        name: vowel
        type: string
      - description: English reading
        in: formData
        name: englishReading
        type: string
      - description: Russian reading
        in: formData
        name: russianReading
        type: string
      - description: Katakana character
        in: formData
        name: katakana
        type: string
      - description: Hiragana character
        in: formData
        name: hiragana
        type: string
      - description: Audio file (optional)
        in: formData
        name: audio
        type: file
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Invalid request
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Character not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Update a character
      tags:
      - admin
  /admin/words:
    get:
      consumes:
      - application/json
      description: Get paginated list of words with optional search filter
      parameters:
      - description: 'Page number (default: 1)'
        in: query
        name: page
        type: integer
      - description: 'Items per page (default: 20)'
        in: query
        name: count
        type: integer
      - description: Search in word, phonetic clues, or translations
        in: query
        name: search
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of words
          schema:
            items:
              $ref: '#/definitions/models.WordListItem'
            type: array
        "400":
          description: Invalid request parameters
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get list of words
      tags:
      - admin
    post:
      consumes:
      - multipart/form-data
      description: Create a new word with optional audio files
      parameters:
      - description: Word
        in: formData
        name: word
        required: true
        type: string
      - description: Phonetic clues
        in: formData
        name: phoneticClues
        required: true
        type: string
      - description: Russian translation
        in: formData
        name: russianTranslation
        required: true
        type: string
      - description: English translation
        in: formData
        name: englishTranslation
        required: true
        type: string
      - description: German translation
        in: formData
        name: germanTranslation
        required: true
        type: string
      - description: Example
        in: formData
        name: example
        required: true
        type: string
      - description: Example Russian translation
        in: formData
        name: exampleRussianTranslation
        required: true
        type: string
      - description: Example English translation
        in: formData
        name: exampleEnglishTranslation
        required: true
        type: string
      - description: Example German translation
        in: formData
        name: exampleGermanTranslation
        required: true
        type: string
      - description: Easy period
        in: formData
        name: easyPeriod
        required: true
        type: integer
      - description: Normal period
        in: formData
        name: normalPeriod
        required: true
        type: integer
      - description: Hard period
        in: formData
        name: hardPeriod
        required: true
        type: integer
      - description: Extra hard period
        in: formData
        name: extraHardPeriod
        required: true
        type: integer
      - description: Word audio file (optional)
        in: formData
        name: wordAudio
        type: file
      - description: Word example audio file (optional)
        in: formData
        name: wordExampleAudio
        type: file
      produces:
      - application/json
      responses:
        "201":
          description: Word created successfully
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Invalid request body or word already exists
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Create a word
      tags:
      - admin
  /admin/words/{id}:
    delete:
      consumes:
      - application/json
      description: Delete a word by ID
      parameters:
      - description: Word ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Invalid word ID
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Word not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Delete a word
      tags:
      - admin
    get:
      consumes:
      - application/json
      description: Get full information about a word by ID
      parameters:
      - description: Word ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Word information
          schema:
            $ref: '#/definitions/models.Word'
        "400":
          description: Invalid word ID
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Word not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get word by ID
      tags:
      - admin
    patch:
      consumes:
      - multipart/form-data
      description: Update word fields (partial update) with optional audio files
      parameters:
      - description: Word ID
        in: path
        name: id
        required: true
        type: integer
      - description: Word
        in: formData
        name: word
        type: string
      - description: Phonetic clues
        in: formData
        name: phoneticClues
        type: string
      - description: Russian translation
        in: formData
        name: russianTranslation
        type: string
      - description: English translation
        in: formData
        name: englishTranslation
        type: string
      - description: German translation
        in: formData
        name: germanTranslation
        type: string
      - description: Example
        in: formData
        name: example
        type: string
      - description: Example Russian translation
        in: formData
        name: exampleRussianTranslation
        type: string
      - description: Example English translation
        in: formData
        name: exampleEnglishTranslation
        type: string
      - description: Example German translation
        in: formData
        name: exampleGermanTranslation
        type: string
      - description: Easy period
        in: formData
        name: easyPeriod
        type: integer
      - description: Normal period
        in: formData
        name: normalPeriod
        type: integer
      - description: Hard period
        in: formData
        name: hardPeriod
        type: integer
      - description: Extra hard period
        in: formData
        name: extraHardPeriod
        type: integer
      - description: Word audio file (optional)
        in: formData
        name: wordAudio
        type: file
      - description: Word example audio file (optional)
        in: formData
        name: wordExampleAudio
        type: file
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Invalid request
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Word not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Update a word
      tags:
      - admin
  /characters:
    get:
      consumes:
      - application/json
      description: Get a list of all hiragana or katakana characters
      parameters:
      - description: 'Alphabet type: hr (hiragana) or kt (katakana), default: hr'
        in: query
        name: type
        type: string
      - description: 'Locale: en (English), ru (Russian), or de (German - treated
          as English), default: en'
        in: query
        name: locale
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of characters
          schema:
            items:
              $ref: '#/definitions/models.CharacterResponse'
            type: array
        "500":
          description: Internal server error - failed to retrieve characters
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get all characters
      tags:
      - characters
  /characters/{id}:
    get:
      consumes:
      - application/json
      description: Get a hiragana or katakana character by its ID
      parameters:
      - description: Character ID
        in: path
        name: id
        required: true
        type: integer
      - description: 'Locale: en (English), ru (Russian), or de (German - treated
          as English), default: en'
        in: query
        name: locale
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Character details
          schema:
            $ref: '#/definitions/models.Character'
        "400":
          description: Bad request - id parameter is required or invalid id parameter
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not found - character not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error - failed to retrieve character
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get character by ID
      tags:
      - characters
  /characters/row-column:
    get:
      consumes:
      - application/json
      description: Get a row or column of hiragana or katakana characters filtered
        by consonant or vowel
      parameters:
      - description: 'Alphabet type: hr (hiragana) or kt (katakana), default: hr'
        in: query
        name: type
        type: string
      - description: 'Locale: en (English), ru (Russian), or de (German - treated
          as English), default: en'
        in: query
        name: locale
        type: string
      - description: Consonant or vowel character
        in: query
        name: character
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of characters matching the filter
          schema:
            items:
              $ref: '#/definitions/models.CharacterResponse'
            type: array
        "400":
          description: Bad request - character parameter is required
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error - failed to retrieve characters
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get characters by row or column
      tags:
      - characters
  /test-results/{type}/{testType}:
    post:
      consumes:
      - application/json
      description: Submit test results for hiragana or katakana reading, writing,
        or listening tests. Requires authentication.
      parameters:
      - description: 'Alphabet type: hiragana or katakana'
        in: path
        name: type
        required: true
        type: string
      - description: 'Test type: reading, writing, or listening'
        in: path
        name: testType
        required: true
        type: string
      - description: Test results
        in: body
        name: results
        required: true
        schema:
          $ref: '#/definitions/handlers.TestResultRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Test results submitted successfully
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad request - invalid request body, empty results array, or
            invalid alphabet/test type
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized - authentication required, invalid/expired token,
            or user ID not found in context
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error - failed to process or save test results
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - ApiKeyAuth: []
      summary: Submit test results
      tags:
      - tests
  /test-results/history:
    get:
      consumes:
      - application/json
      description: Get all learn history records for the authenticated user. Requires
        authentication.
      produces:
      - application/json
      responses:
        "200":
          description: List of learn history records (empty array if no records found)
          schema:
            items:
              $ref: '#/definitions/models.UserLearnHistory'
            type: array
        "401":
          description: Unauthorized - authentication required, invalid/expired token,
            or user ID not found in context
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error - failed to retrieve learn history
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - ApiKeyAuth: []
      summary: Get user's learn history
      tags:
      - tests
  /tests/{type}/listening:
    get:
      consumes:
      - application/json
      description: Get semi-randomized characters for listening test with audio URLs.
        Requires authentication. Uses smart filtering based on user's learning history.
      parameters:
      - description: 'Alphabet type: hiragana or katakana'
        in: path
        name: type
        required: true
        type: string
      - description: 'Locale: en (English), ru (Russian), or de (German - treated
          as English), default: en'
        in: query
        name: locale
        type: string
      - description: 'Number of characters to return, default: 10'
        in: query
        name: count
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of semi-randomized characters for listening test
          schema:
            items:
              $ref: '#/definitions/models.ListeningTestItem'
            type: array
        "400":
          description: Bad request - type parameter is required or invalid alphabet
            type/locale/count
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized - authentication required or user ID not found
            in context
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error - failed to retrieve test characters
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - ApiKeyAuth: []
      summary: Get listening test
      tags:
      - tests
  /tests/{type}/reading:
    get:
      consumes:
      - application/json
      description: Get semi-randomized characters for reading test. Requires authentication.
        Uses smart filtering based on user's learning history.
      parameters:
      - description: 'Alphabet type: hiragana or katakana'
        in: path
        name: type
        required: true
        type: string
      - description: 'Locale: en (English), ru (Russian), or de (German - treated
          as English), default: en'
        in: query
        name: locale
        type: string
      - description: 'Number of characters to return, default: 10'
        in: query
        name: count
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of semi-randomized characters for reading test
          schema:
            items:
              $ref: '#/definitions/models.ReadingTestItem'
            type: array
        "400":
          description: Bad request - type parameter is required or invalid alphabet
            type/locale/count
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized - authentication required or user ID not found
            in context
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error - failed to retrieve test characters
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - ApiKeyAuth: []
      summary: Get reading test
      tags:
      - tests
  /tests/{type}/writing:
    get:
      consumes:
      - application/json
      description: Get semi-randomized characters for writing test with multiple choice
        options. Requires authentication. Uses smart filtering based on user's learning
        history.
      parameters:
      - description: 'Alphabet type: hiragana or katakana'
        in: path
        name: type
        required: true
        type: string
      - description: 'Locale: en (English), ru (Russian), or de (German - treated
          as English), default: en'
        in: query
        name: locale
        type: string
      - description: 'Number of characters to return, default: 10'
        in: query
        name: count
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of semi-randomized characters for writing test with multiple
            choice options
          schema:
            items:
              $ref: '#/definitions/models.WritingTestItem'
            type: array
        "400":
          description: Bad request - type parameter is required or invalid alphabet
            type/locale/count
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized - authentication required or user ID not found
            in context
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error - failed to retrieve test characters
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - ApiKeyAuth: []
      summary: Get writing test
      tags:
      - tests
  /words:
    get:
      consumes:
      - application/json
      description: Get a mixed list of old and new words for the authenticated user.
        Requires authentication.
      parameters:
      - description: 'Number of new words (10-40), default: 20'
        in: query
        name: newCount
        type: integer
      - description: 'Number of old words (10-40), default: 20'
        in: query
        name: oldCount
        type: integer
      - description: 'Locale: en, ru, or de, default: en'
        in: query
        name: locale
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of words
          schema:
            items:
              $ref: '#/definitions/models.WordResponse'
            type: array
        "400":
          description: Bad request - invalid parameters
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized - authentication required
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - ApiKeyAuth: []
      summary: Get word list
      tags:
      - dictionary
  /words/results:
    post:
      consumes:
      - application/json
      description: Submit word learning results with period values. Requires authentication.
      parameters:
      - description: Word results
        in: body
        name: results
        required: true
        schema:
          $ref: '#/definitions/handlers.SubmitWordResultsRequest'
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad request - invalid request body or validation error
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized - authentication required
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - ApiKeyAuth: []
      summary: Submit word learning results
      tags:
      - dictionary
securityDefinitions:
  ApiKeyAuth:
    description: Type "Bearer" followed by a space and JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
